/// <reference types="node" />
import { EventEmitter } from 'events';
import type { IPushDataType } from '../Interfaces';
import { Logger } from '../Logger';
import type { User } from '../databases/entities/User';
export declare abstract class AbstractPush<T> extends EventEmitter {
    protected readonly logger: Logger;
    protected connections: Record<string, T>;
    protected userIdBySessionId: Record<string, string>;
    protected abstract close(connection: T): void;
    protected abstract sendToOne(connection: T, data: string): void;
    constructor(logger: Logger);
    protected add(sessionId: string, userId: User['id'], connection: T): void;
    protected onMessageReceived(sessionId: string, msg: unknown): void;
    protected remove(sessionId?: string): void;
    private sendToSessions;
    broadcast<D>(type: IPushDataType, data?: D): void;
    send<D>(type: IPushDataType, data: D, sessionId: string): void;
    sendToUsers<D>(type: IPushDataType, data: D, userIds: Array<User['id']>): void;
}
