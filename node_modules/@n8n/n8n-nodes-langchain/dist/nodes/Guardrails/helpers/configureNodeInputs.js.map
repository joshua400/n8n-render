{"version":3,"sources":["../../../../nodes/Guardrails/helpers/configureNodeInputs.ts"],"sourcesContent":["import type { GuardrailsOptions } from '../actions/types';\n\nconst LLM_CHECKS = ['nsfw', 'topicalAlignment', 'custom', 'jailbreak'] as const satisfies Array<\n\tkeyof GuardrailsOptions\n>;\n\nexport const hasLLMGuardrails = (guardrails: GuardrailsOptions) => {\n\tconst checks = Object.keys(guardrails ?? {});\n\treturn checks.some((check) => (LLM_CHECKS as string[]).includes(check));\n};\n\nexport const configureNodeInputsV2 = (parameters: { guardrails: GuardrailsOptions }) => {\n\t// typeof LLM_CHECKS guarantees that it's in sync with hasLLMGuardrails\n\tconst CHECKS: typeof LLM_CHECKS = ['nsfw', 'topicalAlignment', 'custom', 'jailbreak'];\n\tconst checks = Object.keys(parameters?.guardrails ?? {});\n\tconst hasLLMChecks = checks.some((check) => (CHECKS as string[]).includes(check));\n\tif (!hasLLMChecks) {\n\t\treturn ['main'];\n\t}\n\n\treturn [\n\t\t'main',\n\t\t{\n\t\t\ttype: 'ai_languageModel',\n\t\t\tdisplayName: 'Chat Model',\n\t\t\tmaxConnections: 1,\n\t\t\trequired: true,\n\t\t\tfilter: {\n\t\t\t\texcludedNodes: [\n\t\t\t\t\t'@n8n/n8n-nodes-langchain.lmCohere',\n\t\t\t\t\t'@n8n/n8n-nodes-langchain.lmOllama',\n\t\t\t\t\t'n8n/n8n-nodes-langchain.lmOpenAi',\n\t\t\t\t\t'@n8n/n8n-nodes-langchain.lmOpenHuggingFaceInference',\n\t\t\t\t],\n\t\t\t},\n\t\t},\n\t];\n};\n\nexport const configureNodeInputsV1 = (operation: 'classify' | 'sanitize') => {\n\tif (operation === 'sanitize') {\n\t\t// sanitize operations don't use a chat model\n\t\treturn ['main'];\n\t}\n\n\treturn [\n\t\t'main',\n\t\t{\n\t\t\ttype: 'ai_languageModel',\n\t\t\tdisplayName: 'Chat Model',\n\t\t\tmaxConnections: 1,\n\t\t\trequired: true,\n\t\t\tfilter: {\n\t\t\t\texcludedNodes: [\n\t\t\t\t\t'@n8n/n8n-nodes-langchain.lmCohere',\n\t\t\t\t\t'@n8n/n8n-nodes-langchain.lmOllama',\n\t\t\t\t\t'n8n/n8n-nodes-langchain.lmOpenAi',\n\t\t\t\t\t'@n8n/n8n-nodes-langchain.lmOpenHuggingFaceInference',\n\t\t\t\t],\n\t\t\t},\n\t\t},\n\t];\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,MAAM,aAAa,CAAC,QAAQ,oBAAoB,UAAU,WAAW;AAI9D,MAAM,mBAAmB,CAAC,eAAkC;AAClE,QAAM,SAAS,OAAO,KAAK,cAAc,CAAC,CAAC;AAC3C,SAAO,OAAO,KAAK,CAAC,UAAW,WAAwB,SAAS,KAAK,CAAC;AACvE;AAEO,MAAM,wBAAwB,CAAC,eAAkD;AAEvF,QAAM,SAA4B,CAAC,QAAQ,oBAAoB,UAAU,WAAW;AACpF,QAAM,SAAS,OAAO,KAAK,YAAY,cAAc,CAAC,CAAC;AACvD,QAAM,eAAe,OAAO,KAAK,CAAC,UAAW,OAAoB,SAAS,KAAK,CAAC;AAChF,MAAI,CAAC,cAAc;AAClB,WAAO,CAAC,MAAM;AAAA,EACf;AAEA,SAAO;AAAA,IACN;AAAA,IACA;AAAA,MACC,MAAM;AAAA,MACN,aAAa;AAAA,MACb,gBAAgB;AAAA,MAChB,UAAU;AAAA,MACV,QAAQ;AAAA,QACP,eAAe;AAAA,UACd;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,EACD;AACD;AAEO,MAAM,wBAAwB,CAAC,cAAuC;AAC5E,MAAI,cAAc,YAAY;AAE7B,WAAO,CAAC,MAAM;AAAA,EACf;AAEA,SAAO;AAAA,IACN;AAAA,IACA;AAAA,MACC,MAAM;AAAA,MACN,aAAa;AAAA,MACb,gBAAgB;AAAA,MAChB,UAAU;AAAA,MACV,QAAQ;AAAA,QACP,eAAe;AAAA,UACd;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,EACD;AACD;","names":[]}