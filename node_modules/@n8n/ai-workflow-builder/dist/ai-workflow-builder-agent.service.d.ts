import { Logger } from '@n8n/backend-common';
import { AiAssistantClient, AiAssistantSDK } from '@n8n_io/ai-assistant-sdk';
import type { IUser, INodeTypeDescription, ITelemetryTrackProperties } from 'n8n-workflow';
import { type ChatPayload } from './workflow-builder-agent';
type OnCreditsUpdated = (userId: string, creditsQuota: number, creditsClaimed: number) => void;
type OnTelemetryEvent = (event: string, properties: ITelemetryTrackProperties) => void;
export declare class AiWorkflowBuilderService {
    private readonly client?;
    private readonly logger?;
    private readonly instanceId?;
    private readonly instanceUrl?;
    private readonly onCreditsUpdated?;
    private readonly onTelemetryEvent?;
    private readonly parsedNodeTypes;
    private sessionManager;
    constructor(parsedNodeTypes: INodeTypeDescription[], client?: AiAssistantClient | undefined, logger?: Logger | undefined, instanceId?: string | undefined, instanceUrl?: string | undefined, onCreditsUpdated?: OnCreditsUpdated | undefined, onTelemetryEvent?: OnTelemetryEvent | undefined);
    private static getAnthropicClaudeModel;
    private getApiProxyAuthHeaders;
    private setupModels;
    private filterNodeTypes;
    private getAgent;
    private onGenerationSuccess;
    chat(payload: ChatPayload, user: IUser, abortSignal?: AbortSignal): AsyncGenerator<import("./types").StreamOutput, void, unknown>;
    private trackBuilderReplyTelemetry;
    getSessions(workflowId: string | undefined, user?: IUser): Promise<{
        sessions: import("./types/sessions").Session[];
    }>;
    getBuilderInstanceCredits(user: IUser): Promise<AiAssistantSDK.BuilderInstanceCreditsResponse>;
}
export {};
