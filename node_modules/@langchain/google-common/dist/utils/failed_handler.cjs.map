{"version":3,"file":"failed_handler.cjs","names":["error: any","params?: AsyncCallerParams","base: AsyncCallerParams"],"sources":["../../src/utils/failed_handler.ts"],"sourcesContent":["import { AsyncCallerParams } from \"@langchain/core/utils/async_caller\";\n\nconst STATUS_NO_RETRY = [\n  400,\n  401,\n  402,\n  403,\n  404,\n  405,\n  406,\n  407,\n  408,\n  409, // Conflict\n];\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function failedAttemptHandler(error: any) {\n  const status = error?.response?.status ?? 0;\n\n  if (status === 0) {\n    // What is this?\n    console.error(\"failedAttemptHandler\", error);\n    throw error;\n  }\n\n  // What errors shouldn't be retried?\n  if (STATUS_NO_RETRY.includes(+status)) {\n    throw error;\n  }\n}\n\nexport function ensureParams(params?: AsyncCallerParams): AsyncCallerParams {\n  const base: AsyncCallerParams = params ?? {};\n  return {\n    onFailedAttempt: failedAttemptHandler,\n    ...base,\n  };\n}\n"],"mappings":";;AAEA,MAAM,kBAAkB;CACtB;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;AACD;AAGD,SAAgB,qBAAqBA,OAAY;CAC/C,MAAM,SAAS,OAAO,UAAU,UAAU;AAE1C,KAAI,WAAW,GAAG;EAEhB,QAAQ,MAAM,wBAAwB,MAAM;AAC5C,QAAM;CACP;AAGD,KAAI,gBAAgB,SAAS,CAAC,OAAO,CACnC,OAAM;AAET;AAED,SAAgB,aAAaC,QAA+C;CAC1E,MAAMC,OAA0B,UAAU,CAAE;AAC5C,QAAO;EACL,iBAAiB;EACjB,GAAG;CACJ;AACF"}